version: '3.8'

services:
  client:
    image: rumppel/client:latest
    container_name: client
    ports:
      - "80:80"
    depends_on:
      - server

  server:
    image: rumppel/server:latest
    container_name: server
    environment:
      MONGODB_TOKEN: ${{ secrets.MONGODB_TOKEN }}
      SESSION_SECRET: ${{secrets.SESSION_SECRET}}
    ports:
      - "3001:3001"

  tg-bot:
    image: rumppel/tg-bot:latest
    container_name: tg-bot
    environment:
      MONGODB_TOKEN: ${{secrets.MONGODB_TOKEN}}
      TG_TOKEN: ${{secrets.TG_TOKEN}}
    ports:
      - "8000:8000"
